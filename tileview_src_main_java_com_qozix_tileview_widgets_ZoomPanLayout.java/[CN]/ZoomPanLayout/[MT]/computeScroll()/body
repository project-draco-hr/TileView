{
  if (mScroller.computeScrollOffset()) {
    int startX=getScrollX();
    int startY=getScrollY();
    int endX=constrainX(mScroller.getCurrX());
    int endY=constrainY(mScroller.getCurrY());
    if (startX != endX || startY != endY) {
      scrollTo(endX,endY);
      if (mIsFlinging) {
        broadcastFlingUpdate(endX,endY);
      }
 else       if (mIsSliding) {
        broadcastProgrammaticPanUpdate(endX,endY);
      }
    }
    if (!mScroller.isFinished()) {
      ViewCompat.postInvalidateOnAnimation(this);
    }
  }
}
