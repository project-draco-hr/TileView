{
  final int width=getWidth();
  final int height=getHeight();
  int translateX=0;
  int translateY=0;
  if (mScaledWidth < width) {
    translateX=width / 2 - mScaledWidth / 2;
  }
  if (mScaledHeight < height) {
    translateY=height / 2 - mScaledHeight / 2;
  }
  for (int i=0; i < getChildCount(); i++) {
    View child=getChildAt(i);
    if (child.getVisibility() != GONE) {
      child.layout(translateX,translateY,mScaledWidth + translateX,mScaledHeight + translateY);
    }
  }
  calculateMinimumScaleToFit();
  constrainScrollToLimits();
}
