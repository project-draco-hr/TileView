{
  measureChildren(widthMeasureSpec,heightMeasureSpec);
  int width=0;
  int height=0;
  for (int i=0; i < getChildCount(); i++) {
    View child=getChildAt(i);
    if (child.getVisibility() != GONE) {
      LayoutParams layoutParams=(LayoutParams)child.getLayoutParams();
      float anchorX=(layoutParams.anchorX == null) ? mAnchorX : layoutParams.anchorX;
      float anchorY=(layoutParams.anchorY == null) ? mAnchorY : layoutParams.anchorY;
      int offsetX=(int)(child.getMeasuredWidth() * anchorX);
      int offsetY=(int)(child.getMeasuredHeight() * anchorY);
      layoutParams.mComputedX=layoutParams.x + offsetX;
      layoutParams.mComputedY=layoutParams.y + offsetY;
      int right=layoutParams.mComputedX + child.getMeasuredWidth();
      int bottom=layoutParams.mComputedY + child.getMeasuredHeight();
      width=Math.max(width,right);
      height=Math.max(height,bottom);
    }
  }
  height=Math.max(height,getSuggestedMinimumHeight());
  width=Math.max(width,getSuggestedMinimumWidth());
  width=resolveSize(width,widthMeasureSpec);
  height=resolveSize(height,heightMeasureSpec);
  setMeasuredDimension(width,height);
}
