{
  if (mScroller.computeScrollOffset()) {
    int startX=getScrollX();
    int startY=getScrollY();
    int endX=constrainX(mScroller.getCurrX());
    int endY=constrainY(mScroller.getCurrY());
    if (startX != endX || startY != endY) {
      scrollTo(endX,endY);
      for (      ZoomPanListener listener : mZoomPanListeners) {
        listener.onPan(endX,endY,ZoomPanListener.State.PROGRESS);
      }
    }
  }
  invalidate();
}
